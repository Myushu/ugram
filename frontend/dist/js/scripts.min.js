"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},core_1=require("@angular/core"),router_1=require("@angular/router"),home_component_1=require("app/ugram/components/home/home.component"),picture_component_1=require("app/ugram/components/picture/picture.component"),user_feed_component_1=require("app/ugram/components/user/user.feed.component"),user_update_component_1=require("app/ugram/components/user/user.update.component"),login_component_1=require("app/ugram/components/login/login.component"),user_profile_component_1=require("app/ugram/components/user/user.profile.component"),user_upload_component_1=require("app/ugram/components/user/user.upload.component"),user_discover_component_1=require("app/ugram/components/user/user.discover.component"),routes=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:home_component_1.HomeComponent},{path:"picture/:userid/:id",component:picture_component_1.PictureComponent},{path:"user/:userid",component:user_feed_component_1.UserFeedComponent},{path:"update",component:user_update_component_1.UserUpdateComponent},{path:"user/:userid",component:user_feed_component_1.UserFeedComponent},{path:"login",component:login_component_1.LoginComponent},{path:"profile",component:user_profile_component_1.UserProfileComponent},{path:"upload",component:user_upload_component_1.UserUploadComponent},{path:"discover",component:user_discover_component_1.UserDiscoverComponent}],AppRoutingModule=function(){function e(){}return e}();AppRoutingModule=__decorate([core_1.NgModule({imports:[router_1.RouterModule.forRoot(routes)],exports:[router_1.RouterModule]})],AppRoutingModule),exports.AppRoutingModule=AppRoutingModule;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),router_1=require("@angular/router"),core_2=require("angular2-cookie/core"),ng_bootstrap_1=require("@ng-bootstrap/ng-bootstrap"),AppComponent=function(){function e(e,t,r){this.router=e,this._cookieService=t,this.modalService=r}return e}();AppComponent=__decorate([core_1.Component({selector:"my-app",template:'<div id="wrapper">\n                <navbar></navbar>\n                <router-outlet></router-outlet>\n                </div>\n                '}),__metadata("design:paramtypes",[router_1.Router,core_2.CookieService,ng_bootstrap_1.NgbModal])],AppComponent),exports.AppComponent=AppComponent;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},core_1=require("@angular/core"),platform_browser_1=require("@angular/platform-browser"),forms_1=require("@angular/forms"),http_1=require("@angular/http"),cookies_service_1=require("angular2-cookie/services/cookies.service"),common_1=require("@angular/common"),ng_bootstrap_1=require("@ng-bootstrap/ng-bootstrap"),app_routing_module_1=require("./app-routing.module"),ng2_tag_input_1=require("ng2-tag-input"),app_component_1=require("./app.component"),navbar_component_1=require("./ugram/components/nav/navbar.component"),home_component_1=require("app/ugram/components/home/home.component"),picture_component_1=require("app/ugram/components/picture/picture.component"),user_feed_component_1=require("app/ugram/components/user/user.feed.component"),login_component_1=require("app/ugram/components/login/login.component"),user_profile_component_1=require("app/ugram/components/user/user.profile.component"),user_upload_component_1=require("app/ugram/components/user/user.upload.component"),user_update_component_1=require("app/ugram/components/user/user.update.component"),user_discover_component_1=require("app/ugram/components/user/user.discover.component"),core_api_service_1=require("./ugram/services/api/core.api.service"),global_event_manager_service_1=require("./ugram/services/globalEventManager/global.event.manager.service"),AppModule=function(){function e(){}return e}();AppModule=__decorate([core_1.NgModule({imports:[platform_browser_1.BrowserModule,forms_1.FormsModule,http_1.HttpModule,app_routing_module_1.AppRoutingModule,ng_bootstrap_1.NgbModule.forRoot(),ng2_tag_input_1.TagInputModule],declarations:[app_component_1.AppComponent,navbar_component_1.NavBarComponent,home_component_1.HomeComponent,picture_component_1.PictureComponent,user_feed_component_1.UserFeedComponent,login_component_1.LoginComponent,user_profile_component_1.UserProfileComponent,user_upload_component_1.UserUploadComponent,user_update_component_1.UserUpdateComponent,user_discover_component_1.UserDiscoverComponent],providers:[{provide:common_1.LocationStrategy,useClass:common_1.HashLocationStrategy},core_api_service_1.CoreApiService,cookies_service_1.CookieService,global_event_manager_service_1.GlobalEventsManager],bootstrap:[app_component_1.AppComponent]})],AppModule),exports.AppModule=AppModule;var platform_browser_dynamic_1=require("@angular/platform-browser-dynamic"),app_module_1=require("./app.module"),platform=platform_browser_dynamic_1.platformBrowserDynamic();platform.bootstrapModule(app_module_1.AppModule);var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),core_2=require("angular2-cookie/core"),router_1=require("@angular/router"),pictures_service_1=require("app/ugram/services/picture/pictures.service"),user_service_1=require("app/ugram/services/user/user.service"),HomeComponent=function(){function e(e,t,r,o,i){var n=this;this.lc=e,this._cookieService=t,this.router=r,this.picturesService=o,this.userService=i,this.images=[],this.currentPage=0,this._cookieService.get("token")||this.router.navigate(["/login"]),window.onscroll=function(){var t="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,r=document.body,o=document.documentElement,i=Math.max(r.scrollHeight,r.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight),c=t+window.pageYOffset;c>=i&&(console.log("bottom anchor"),n.currentPage+=1,console.log("page",n.currentPage),n.picturesService.get_pictures(20,n.currentPage).then(function(e){e.items=n.picturesService.format_pucture(e.items),n.images=n.images.concat(e.items)})),e.run(function(){})}}return e.prototype.ngOnInit=function(){var e=this;this.picturesService.get_pictures(20,this.currentPage).then(function(t){e.images=t.items,e.images=e.picturesService.format_pucture(e.images),console.log(e.images)})},e}();HomeComponent=__decorate([core_1.Component({selector:"home",templateUrl:"app/ugram/templates/home/home.component.html",providers:[pictures_service_1.PicturesService,user_service_1.UserService]}),__metadata("design:paramtypes",[core_1.NgZone,core_2.CookieService,router_1.Router,pictures_service_1.PicturesService,user_service_1.UserService])],HomeComponent),exports.HomeComponent=HomeComponent;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),core_2=require("angular2-cookie/core"),router_1=require("@angular/router"),global_event_manager_service_1=require("app/ugram/services/globalEventManager/global.event.manager.service"),NavBarComponent=function(){function e(e,t,r){var o=this;this.globalEventsManager=e,this._cookieService=t,this.router=r,this.showNavBar=!1,this.showNavBar=!0,this.globalEventsManager.showNavBar.subscribe(function(e){o.showNavBar=e})}return e.prototype.logoutAction=function(){this._cookieService.removeAll(),this.globalEventsManager.showNavBar.emit(!1),this.router.navigate(["/login"])},e}();NavBarComponent=__decorate([core_1.Component({selector:"navbar",templateUrl:"app/ugram/templates/menu/menu.component.html"}),__metadata("design:paramtypes",[global_event_manager_service_1.GlobalEventsManager,core_2.CookieService,router_1.Router])],NavBarComponent),exports.NavBarComponent=NavBarComponent;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),core_2=require("angular2-cookie/core"),router_1=require("@angular/router"),user_service_1=require("app/ugram/services/user/user.service"),global_event_manager_service_1=require("app/ugram/services/globalEventManager/global.event.manager.service"),LoginComponent=function(){function e(e,t,r,o){this._cookieService=e,this.router=t,this.userService=r,this.globalEventsManager=o,this.token="",this.globalEventsManager.showNavBar.emit(!1),this._cookieService.get("token")&&this.router.navigate(["/home"])}return e.prototype.login=function(){var e=this;this.userService.who_im_i(this.token).then(function(t){e.globalEventsManager.showNavBar.emit(!0),e._cookieService.putObject("token",t),e.router.navigate(["/home"])})},e}();LoginComponent=__decorate([core_1.Component({selector:"home",templateUrl:"app/ugram/templates/login/login.component.html",providers:[user_service_1.UserService]}),__metadata("design:paramtypes",[core_2.CookieService,router_1.Router,user_service_1.UserService,global_event_manager_service_1.GlobalEventsManager])],LoginComponent),exports.LoginComponent=LoginComponent;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),router_1=require("@angular/router"),pictures_service_1=require("app/ugram/services/picture/pictures.service"),PictureComponent=function(){function e(e,t,r){this.router=e,this.picturesService=t,this.Route=r,this.image=[]}return e.prototype.ngOnInit=function(){var e=this;this.Route.params.subscribe(function(t){e.userId=t.userid,e.imageId=t.id,e.picturesService.get_picture(e.userId,e.imageId).then(function(t){console.log(t),e.image=e.picturesService.format_pucture(t),console.log(e.image)})})},e}();PictureComponent=__decorate([core_1.Component({selector:"home",templateUrl:"app/ugram/templates/picture/picture.component.html",providers:[pictures_service_1.PicturesService]}),__metadata("design:paramtypes",[router_1.Router,pictures_service_1.PicturesService,router_1.ActivatedRoute])],PictureComponent),exports.PictureComponent=PictureComponent;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),router_1=require("@angular/router"),pictures_service_1=require("app/ugram/services/picture/pictures.service"),user_service_1=require("app/ugram/services/user/user.service"),UserDiscoverComponent=function(){function e(e,t,r,o){this.router=e,this.picturesService=t,this.userService=r,this.Route=o}return e.prototype.ngOnInit=function(){},e}();UserDiscoverComponent=__decorate([core_1.Component({selector:"home",templateUrl:"app/ugram/templates/user/discover.component.html",providers:[pictures_service_1.PicturesService,user_service_1.UserService]}),__metadata("design:paramtypes",[router_1.Router,pictures_service_1.PicturesService,user_service_1.UserService,router_1.ActivatedRoute])],UserDiscoverComponent),exports.UserDiscoverComponent=UserDiscoverComponent;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),router_1=require("@angular/router"),pictures_service_1=require("app/ugram/services/picture/pictures.service"),user_service_1=require("app/ugram/services/user/user.service"),UserFeedComponent=function(){function e(e,t,r,o){this.router=e,this.picturesService=t,this.userService=r,this.Route=o,this.images=[],this.user=[],this.nb_image=0}return e.prototype.ngOnInit=function(){var e=this;this.Route.params.subscribe(function(t){e.userService.get_user(t.userid).then(function(t){e.user=t,console.log(e.user),e.picturesService.get_user_picture(e.user.id).then(function(t){e.images=t.items,e.images=e.picturesService.format_pucture(e.images),e.nb_image=e.images.length})})})},e}();UserFeedComponent=__decorate([core_1.Component({selector:"home",templateUrl:"app/ugram/templates/user/feed.component.html",providers:[pictures_service_1.PicturesService,user_service_1.UserService]}),__metadata("design:paramtypes",[router_1.Router,pictures_service_1.PicturesService,user_service_1.UserService,router_1.ActivatedRoute])],UserFeedComponent),exports.UserFeedComponent=UserFeedComponent;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),core_2=require("angular2-cookie/core"),router_1=require("@angular/router"),pictures_service_1=require("app/ugram/services/picture/pictures.service"),user_service_1=require("app/ugram/services/user/user.service"),UserProfileComponent=function(){function e(e,t,r,o,i){this._cookieService=e,this.router=t,this.picturesService=r,this.userService=o,this.Route=i,this.images=[],this.user=[],this.nb_image=0}return e.prototype.ngOnInit=function(){var e=this;this.Route.params.subscribe(function(t){e.userService.get_user(e._cookieService.getObject("token").id).then(function(t){e.user=t,console.log(e.user),e.picturesService.get_user_picture(e._cookieService.getObject("token").id).then(function(t){e.images=t.items,e.images=e.picturesService.format_pucture(e.images),e.nb_image=e.images.length})})})},e}();UserProfileComponent=__decorate([core_1.Component({selector:"home",templateUrl:"app/ugram/templates/user/profile.component.html",providers:[pictures_service_1.PicturesService,user_service_1.UserService]}),__metadata("design:paramtypes",[core_2.CookieService,router_1.Router,pictures_service_1.PicturesService,user_service_1.UserService,router_1.ActivatedRoute])],UserProfileComponent),exports.UserProfileComponent=UserProfileComponent;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),core_2=require("angular2-cookie/core"),router_1=require("@angular/router"),user_service_1=require("app/ugram/services/user/user.service"),UserUpdateComponent=function(){function e(e,t,r,o){this._cookieService=e,this.router=t,this.userService=r,this.Route=o}return e.prototype.ngOnInit=function(){this.user=this._cookieService.getObject("token"),console.log(this.user),this.UserSurName=this.user.lastName,this.UserName=this.user.firstName,this.UserTel=this.user.phoneNumber,this.UserEmail=this.user.email},e.prototype.submitUpdate=function(){var e={lastName:this.UserSurName,firstName:this.UserName,phoneNumber:this.UserTel,email:this.UserEmail};this.userService.update_user(this.user.id,e,"353aac98-0fed-42aa-afcf-e7228f06ed53")},e}();UserUpdateComponent=__decorate([core_1.Component({selector:"update",templateUrl:"app/ugram/templates/user/update.component.html",providers:[user_service_1.UserService]}),__metadata("design:paramtypes",[core_2.CookieService,router_1.Router,user_service_1.UserService,router_1.ActivatedRoute])],UserUpdateComponent),exports.UserUpdateComponent=UserUpdateComponent;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),core_2=require("angular2-cookie/core"),router_1=require("@angular/router"),pictures_service_1=require("app/ugram/services/picture/pictures.service"),user_service_1=require("app/ugram/services/user/user.service"),UserUploadComponent=function(){function e(e,t,r,o,i){this._cookieService=e,this.router=t,this.picturesService=r,this.userService=o,this.Route=i,this.items=["Typescript","Angular2"]}return e.prototype.ngOnInit=function(){},e}();UserUploadComponent=__decorate([core_1.Component({selector:"home",templateUrl:"app/ugram/templates/user/upload.component.html",providers:[pictures_service_1.PicturesService,user_service_1.UserService]}),__metadata("design:paramtypes",[core_2.CookieService,router_1.Router,pictures_service_1.PicturesService,user_service_1.UserService,router_1.ActivatedRoute])],UserUploadComponent),exports.UserUploadComponent=UserUploadComponent;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),http_1=require("@angular/http"),core_2=require("angular2-cookie/core");require("rxjs/add/operator/toPromise");var CoreApiService=function(){function e(e,t){this.http=e,this._cookieService=t,this.baseUrl="http://api.ugram.net"}return e.prototype.request=function(e){e.url=this.baseUrl+e.url;var t=new http_1.Headers;t.append("Content-Type","application/json"),e.token&&t.append("Authorization","Bearer "+e.token);var r=new http_1.RequestOptions({method:e.method,url:e.url,headers:t});return e.data&&(r.body=e.data),console.log("request",r),this.http.request(new http_1.Request(r)).toPromise().then(function(e){return e}).catch(function(e){return e})},e.getRoute=function(){return{pictures:{get_pictures:"/pictures",get_user_pictures:"/users/{user_id}/pictures",get_user_picture:"/users/{user_id}/pictures/{picture_id}"},user:{get_user:"/users/{user_id}",get_users:"/users?perPage=1000",update_user:"/users/{user_id}"}}},e}();CoreApiService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http,core_2.CookieService])],CoreApiService),exports.CoreApiService=CoreApiService;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),GlobalEventsManager=function(){function e(){this.showNavBar=new core_1.EventEmitter}return e}();GlobalEventsManager=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],GlobalEventsManager),exports.GlobalEventsManager=GlobalEventsManager;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),core_api_service_1=require("app/ugram/services/api/core.api.service"),PicturesService=function(){function e(e){this.coreApiService=e}return e.prototype.get_pictures=function(e,t){var r=this,o={method:"GET",url:core_api_service_1.CoreApiService.getRoute().pictures.get_pictures+"?page="+t+"&perPage="+e};return new Promise(function(e,t){r.coreApiService.request(o).then(function(t){var r=JSON.parse(t._body);e(r)})})},e.prototype.get_picture=function(e,t){var r=this,o=core_api_service_1.CoreApiService.getRoute().pictures.get_user_picture,o=o.replace("{user_id}",e),o=o.replace("{picture_id}",t),i={method:"GET",url:o};return new Promise(function(e,t){r.coreApiService.request(i).then(function(t){var r=JSON.parse(t._body);e(r)})})},e.prototype.get_user_picture=function(e){var t=this,r=core_api_service_1.CoreApiService.getRoute().pictures.get_user_pictures,r=r.replace("{user_id}",e),o={method:"GET",url:r};return new Promise(function(e,r){t.coreApiService.request(o).then(function(t){var r=JSON.parse(t._body);e(r)})})},e.prototype.timeSince=function(e){var t=Math.floor((+new Date-e)/1e3),r=Math.floor(t/31536e3);return r>1?r+" years ago":(r=Math.floor(t/2592e3),r>1?r+" months ago":(r=Math.floor(t/86400),r>1?r+" days ago":(r=Math.floor(t/3600),r>1?r+" hours ago":(r=Math.floor(t/60),r>1?r+" minutes ago":Math.floor(t)+" seconds ago"))))},e.prototype.format_pucture=function(e){if(e.length)for(var t=0;t<e.length;t++)e[t].timeSince=this.timeSince(e[t].createdDate);else e.timeSince=this.timeSince(e.createdDate);return e},e}();PicturesService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[core_api_service_1.CoreApiService])],PicturesService),exports.PicturesService=PicturesService;var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),core_api_service_1=require("app/ugram/services/api/core.api.service"),UserService=function(){function e(e){this.coreApiService=e}return e.prototype.get_users=function(){var e=this,t={method:"GET",url:core_api_service_1.CoreApiService.getRoute().user.get_users};return new Promise(function(r,o){e.coreApiService.request(t).then(function(e){var t=JSON.parse(e._body);r(t)})})},e.prototype.get_user=function(e){var t=this,r=core_api_service_1.CoreApiService.getRoute().user.get_user,r=r.replace("{user_id}",e),o={method:"GET",url:r};return new Promise(function(e,r){t.coreApiService.request(o).then(function(t){var r=JSON.parse(t._body);e(r)})})},e.prototype.update_user=function(e,t,r){var o=this,i=core_api_service_1.CoreApiService.getRoute().user.update_user,i=i.replace("{user_id}",e),n={method:"PUT",url:i,data:JSON.stringify(t),token:r};return new Promise(function(e,t){o.coreApiService.request(n).then(function(t){var r=JSON.parse(t._body);e(r)})})},e.prototype.who_im_i=function(e){var t=this;return new Promise(function(r,o){t.get_users().then(function(o){for(var i=0;i<o.totalEntries;i++){console.log("u",o.items[i]);var n={email:o.items[i].email,firstName:o.items[i].firstName,lastName:o.items[i].lastName,phoneNumber:o.items[i].phoneNumber};t.update_user(o.items[i].id,n,e).then(function(e){e.id&&r(e)})}})})},e}();UserService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[core_api_service_1.CoreApiService])],UserService),exports.UserService=UserService;