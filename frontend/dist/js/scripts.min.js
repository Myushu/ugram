"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var a,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(n<3?a(c):n>3?a(t,r,c):a(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},core_1=require("@angular/core"),router_1=require("@angular/router"),home_component_1=require("app/ugram/components/home/home.component"),routes=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:home_component_1.HomeComponent}],AppRoutingModule=function(){function e(){}return e}();AppRoutingModule=__decorate([core_1.NgModule({imports:[router_1.RouterModule.forRoot(routes)],exports:[router_1.RouterModule]})],AppRoutingModule),exports.AppRoutingModule=AppRoutingModule;var __decorate=this&&this.__decorate||function(e,t,r,o){var a,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(n<3?a(c):n>3?a(t,r,c):a(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),router_1=require("@angular/router"),core_2=require("angular2-cookie/core"),AppComponent=function(){function e(e,t){this.router=e,this._cookieService=t}return e}();AppComponent=__decorate([core_1.Component({selector:"my-app",template:'<div id="wrapper">\n                <navbar></navbar>\n                <router-outlet></router-outlet>\n                </div>\n                '}),__metadata("design:paramtypes",[router_1.Router,core_2.CookieService])],AppComponent),exports.AppComponent=AppComponent;var __decorate=this&&this.__decorate||function(e,t,r,o){var a,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(n<3?a(c):n>3?a(t,r,c):a(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},core_1=require("@angular/core"),platform_browser_1=require("@angular/platform-browser"),forms_1=require("@angular/forms"),http_1=require("@angular/http"),cookies_service_1=require("angular2-cookie/services/cookies.service"),common_1=require("@angular/common"),ng_bootstrap_1=require("@ng-bootstrap/ng-bootstrap"),app_routing_module_1=require("./app-routing.module"),app_component_1=require("./app.component"),navbar_component_1=require("./ugram/components/nav/navbar.component"),home_component_1=require("app/ugram/components/home/home.component"),core_api_service_1=require("./ugram/services/api/core.api.service"),global_event_manager_service_1=require("./ugram/services/globalEventManager/global.event.manager.service"),AppModule=function(){function e(){}return e}();AppModule=__decorate([core_1.NgModule({imports:[platform_browser_1.BrowserModule,forms_1.FormsModule,http_1.HttpModule,app_routing_module_1.AppRoutingModule,ng_bootstrap_1.NgbModule.forRoot()],declarations:[app_component_1.AppComponent,navbar_component_1.NavBarComponent,home_component_1.HomeComponent],providers:[{provide:common_1.LocationStrategy,useClass:common_1.HashLocationStrategy},core_api_service_1.CoreApiService,cookies_service_1.CookieService,global_event_manager_service_1.GlobalEventsManager],bootstrap:[app_component_1.AppComponent]})],AppModule),exports.AppModule=AppModule;var platform_browser_dynamic_1=require("@angular/platform-browser-dynamic"),app_module_1=require("./app.module"),platform=platform_browser_dynamic_1.platformBrowserDynamic();platform.bootstrapModule(app_module_1.AppModule);var __decorate=this&&this.__decorate||function(e,t,r,o){var a,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(n<3?a(c):n>3?a(t,r,c):a(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),core_2=require("angular2-cookie/core"),router_1=require("@angular/router"),pictures_service_1=require("app/ugram/services/picture/pictures.service"),HomeComponent=function(){function e(e,t,r){this._cookieService=e,this.router=t,this.picturesService=r,this.images=[]}return e.prototype.ngOnInit=function(){var e=this;this.picturesService.get_pictures().then(function(t){e.images=t.items,console.log(e.images)})},e}();HomeComponent=__decorate([core_1.Component({selector:"home",templateUrl:"app/ugram/templates/home/home.component.html",providers:[pictures_service_1.PicturesService]}),__metadata("design:paramtypes",[core_2.CookieService,router_1.Router,pictures_service_1.PicturesService])],HomeComponent),exports.HomeComponent=HomeComponent;var __decorate=this&&this.__decorate||function(e,t,r,o){var a,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(n<3?a(c):n>3?a(t,r,c):a(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),core_2=require("angular2-cookie/core"),router_1=require("@angular/router"),global_event_manager_service_1=require("app/ugram/services/globalEventManager/global.event.manager.service"),NavBarComponent=function(){function e(e,t,r){var o=this;this.globalEventsManager=e,this._cookieService=t,this.router=r,this.showNavBar=!1,this.showNavBar=!0,this.globalEventsManager.showNavBar.subscribe(function(e){o.showNavBar=e})}return e.prototype.logoutAction=function(){this._cookieService.removeAll(),this.globalEventsManager.showNavBar.emit(!1),this.router.navigate(["/signin"])},e}();NavBarComponent=__decorate([core_1.Component({selector:"navbar",templateUrl:"app/ugram/templates/menu/menu.component.html"}),__metadata("design:paramtypes",[global_event_manager_service_1.GlobalEventsManager,core_2.CookieService,router_1.Router])],NavBarComponent),exports.NavBarComponent=NavBarComponent;var __decorate=this&&this.__decorate||function(e,t,r,o){var a,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(n<3?a(c):n>3?a(t,r,c):a(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),http_1=require("@angular/http"),core_2=require("angular2-cookie/core");require("rxjs/add/operator/toPromise");var CoreApiService=function(){function e(e,t){this.http=e,this._cookieService=t,this.baseUrl="http://api.ugram.net"}return e.prototype.request=function(e){e.url=this.baseUrl+e.url;var t=new http_1.Headers;t.append("Content-Type","application/x-www-form-urlencoded");var r=new http_1.RequestOptions({method:e.method,url:e.url,headers:t});return e.data&&(r.body=e.data),this.http.request(new http_1.Request(r)).toPromise().then(function(e){return e}).catch(function(e){return e})},e.getRoute=function(){return{pictures:{get_pictures:"/pictures"}}},e}();CoreApiService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http,core_2.CookieService])],CoreApiService),exports.CoreApiService=CoreApiService;var __decorate=this&&this.__decorate||function(e,t,r,o){var a,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(n<3?a(c):n>3?a(t,r,c):a(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),GlobalEventsManager=function(){function e(){this.showNavBar=new core_1.EventEmitter}return e}();GlobalEventsManager=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],GlobalEventsManager),exports.GlobalEventsManager=GlobalEventsManager;var __decorate=this&&this.__decorate||function(e,t,r,o){var a,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(n<3?a(c):n>3?a(t,r,c):a(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),core_api_service_1=require("app/ugram/services/api/core.api.service"),PicturesService=function(){function e(e){this.coreApiService=e}return e.prototype.get_pictures=function(){var e=this,t={method:"GET",url:core_api_service_1.CoreApiService.getRoute().pictures.get_pictures};return new Promise(function(r,o){e.coreApiService.request(t).then(function(e){var t=JSON.parse(e._body);r(t)})})},e}();PicturesService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[core_api_service_1.CoreApiService])],PicturesService),exports.PicturesService=PicturesService;var __decorate=this&&this.__decorate||function(e,t,r,o){var a,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(n<3?a(c):n>3?a(t,r,c):a(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),core_2=require("angular2-cookie/core"),router_1=require("@angular/router");require("rxjs/add/operator/toPromise");var core_api_service_1=require("app/ugram/services/api/core.api.service"),CoreUserService=function(){function e(e,t,r){this.coreApiService=e,this._cookieService=t,this.router=r}return e.prototype.Signin=function(e,t){var r=this,o={method:"POST",data:"email="+e+"&password="+t};return new Promise(function(e,t){r.coreApiService.request(o).then(function(t){if(1==t.ok){console.log(t);var o={"access-token":t.headers.get("access-token"),client:t.headers.get("client"),uid:t.headers.get("uid")};r._cookieService.putObject("type_user",JSON.parse(t._body).type_user),r._cookieService.putObject("token",o),e(!0)}else e(!1)})})},e.prototype.Signup=function(e,t,r){var o=this,a={method:"POST",data:"email="+e+"&password="+t+"&password_confirmation="+r};return new Promise(function(e,t){o.coreApiService.request(a).then(function(t){e(t)})})},e.prototype.isLogIn=function(){return!!this._cookieService.get("token")},e.prototype.check=function(e){void 0===e&&(e=0),this.isLogIn()||this.router.navigate(["/signin"])},e}();CoreUserService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[core_api_service_1.CoreApiService,core_2.CookieService,router_1.Router])],CoreUserService),exports.CoreUserService=CoreUserService;